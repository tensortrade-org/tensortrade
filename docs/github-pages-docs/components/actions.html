

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Actions &mdash; TensorTrade 0.2.0-beta.2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Action Scheme" href="action_scheme.html" />
    <link rel="prev" title="Components" href="components.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
</ul>
<p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/getting_started.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/getting_started.html#docker">Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/overview.html">Code Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/simple_sine_curve.html">Simple Sine Curve</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/pairs_trading.html">Pairs Trading</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-an-action">What is an Action?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default">Default</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple">Simple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#action-space">Action Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="#perform">Perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compatibility">Compatibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#managedrisk">ManagedRisk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Action Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Compatibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bsh">BSH</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Action Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">Perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">Compatibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pairs">Pairs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">Action Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">Perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="action_scheme.html">Action Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="reward_scheme.html">Reward Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="observer.html">Observer</a></li>
<li class="toctree-l1"><a class="reference internal" href="stopper.html">Stopper</a></li>
<li class="toctree-l1"><a class="reference internal" href="informer.html">Informer</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderer.html">Renderer</a></li>
</ul>
<p class="caption"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../envs/trading_env.html">TradingEnvironment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/generic.html">Generic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/default.html">Default</a></li>
</ul>
<p class="caption"><span class="caption-text">Feed</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../feed/overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Order Management System (OMS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../oms/overview.html">Order Management System (OMS)</a></li>
</ul>
<p class="caption"><span class="caption-text">Agents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agents/learning_agents.html">Learning Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/ray.html">Ray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/stable_baselines.html">Stable Baselines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/tensorforce.html">Tensorforce</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TensorTrade</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Actions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/components/actions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="actions">
<h1>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h1>
<p>An <code class="docutils literal notranslate"><span class="pre">ActionScheme</span></code> defines the action space of the environment and
interprets the action of an agent and how it gets applied to the
environment.</p>
<p>For example, if we were using a discrete action space of 3 actions (0 =
hold, 1 = buy 100 %, 2 = sell 100%), our learning agent does not need to
know that returning an action of 1 is equivalent to buying an
instrument. Rather, the agent needs to know the reward for returning an
action of 1 in specific circumstances, and can leave the implementation
details of converting actions to trades to the <code class="docutils literal notranslate"><span class="pre">ActionScheme</span></code>.</p>
<p>Each action scheme has a <code class="docutils literal notranslate"><span class="pre">perform</span></code> method, which will interpret the
agent’s specified action into a change in the environmental state. It is
often necessary to store additional state within the scheme, for example
to keep track of the currently traded position. This state should be
reset each time the action scheme’s reset method is called, which is
done automatically when the parent <code class="docutils literal notranslate"><span class="pre">TradingEnv</span></code> is reset.</p>
<div class="section" id="what-is-an-action">
<h2>What is an Action?<a class="headerlink" href="#what-is-an-action" title="Permalink to this headline">¶</a></h2>
<p>This is a review of what was mentioned inside of the overview section
and explains how a RL operates. You’ll better understand what an action
is in context of an observation space and reward. At the same time,
hopefully this will be a proper refresher.</p>
<p>An action is a predefined value of how the machine should move inside of
the world. To better summarize, its a <em>command that a player would give
inside of a video game in response to a stimuli</em>. The commands usually
come in the form of an <code class="docutils literal notranslate"><span class="pre">action_space</span></code>. An <code class="docutils literal notranslate"><span class="pre">action_space</span></code> defines the
rules for how a user is allowed to act inside of an environment. While
it might not be easily interpretable by humans, it can easily be
interpreted by a machine.</p>
<p>Let’s look at a good example. Let’s say we’re trying to balance a cart
with a pole on it (cartpole). We can choose to move the cart left and
right. This is a <code class="docutils literal notranslate"><span class="pre">Discrete(2)</span></code> action space.</p>
<ul class="simple">
<li><p>0 - Push cart to the left</p></li>
<li><p>1 - Push cart to the right</p></li>
</ul>
<p>When we get the action from the agent, the environment will see that
number instead of a name.</p>
<p><img alt="Watch Link Run Around In Circles" src="../_images/cartpole.gif" /></p>
<p>An <code class="docutils literal notranslate"><span class="pre">ActionScheme</span></code> supports any type of action space that subclasses
<code class="docutils literal notranslate"><span class="pre">Space</span></code> from <code class="docutils literal notranslate"><span class="pre">gym</span></code>. For example, here is an implementation of an
action space that represents a probability simplex.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">gym.spaces</span> <span class="kn">import</span> <span class="n">Space</span>

<span class="k">class</span> <span class="nc">Simplex</span><span class="p">(</span><span class="n">Space</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="mi">2</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>

    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="o">*</span><span class="p">[</span><span class="mi">3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()])</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="default">
<h2>Default<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h2>
<p>The default TensorTrade action scheme is made to be compatible with the
built-in order management system (OMS). The OMS is a system that is able
to have orders be submitted to it for particular financial instruments.</p>
<div class="section" id="simple">
<h3>Simple<a class="headerlink" href="#simple" title="Permalink to this headline">¶</a></h3>
<p><strong>Description</strong>
Blank.</p>
</div>
</div>
<div class="section" id="action-space">
<h2>Action Space<a class="headerlink" href="#action-space" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="perform">
<h2>Perform<a class="headerlink" href="#perform" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h2>
<div class="section" id="managedrisk">
<h3>ManagedRisk<a class="headerlink" href="#managedrisk" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>Action Space<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id2">
<h2>Perform<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id3">
<h2>Compatibility<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bsh">
<h3>BSH<a class="headerlink" href="#bsh" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id4">
<h2>Description<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id5">
<h2>Action Space<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id6">
<h2>Perform<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id7">
<h2>Compatibility<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pairs">
<h3>Pairs<a class="headerlink" href="#pairs" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id8">
<h2>Description<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id9">
<h2>Action Space<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id10">
<h2>Perform<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id11">
<h2>Compatibility<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="action_scheme.html" class="btn btn-neutral float-right" title="Action Scheme" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="components.html" class="btn btn-neutral float-left" title="Components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>