

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Feature Pipeline &mdash; TensorTrade 0.2.0-beta.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Action Scheme" href="action_scheme.html" />
    <link rel="prev" title="Exchange" href="exchange.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
</ul>
<p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/getting_started.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/getting_started.html#docker">Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/overview.html">Code Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Component Types</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="trading_environment.html">Trading Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="exchange.html">Exchange</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Feature Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_scheme.html">Action Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="reward_scheme.html">Reward Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="trading_strategy.html">Trading Strategy</a></li>
</ul>
<p class="caption"><span class="caption-text">Trading Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../environments/TradingEnvironment.html">TradingEnvironment</a></li>
</ul>
<p class="caption"><span class="caption-text">Exchanges</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exchanges/Exchange.html">Exchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exchanges/simulated/SimulatedExchange.html">SimulatedExchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exchanges/simulated/FBMExchange.html">FBMExchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exchanges/live/CCXTExchange.html">CCXTExchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exchanges/live/InteractiveBrokersExchange.html">InteractiveBrokersExchange</a></li>
</ul>
<p class="caption"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/FeaturePipeline.html">FeaturePipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/FeatureTransformer.html">FeatureTransformer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/scalers/MinMaxNormalizer.html">MinMaxNormalizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/scalers/StandardNormalizer.html">StandardNormalizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/stationarity/FractionalDifference.html">FractionalDifference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/indicators/TAlibIndicator.html">TAlibIndicator</a></li>
</ul>
<p class="caption"><span class="caption-text">Actions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../actions/ActionScheme.html">ActionScheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actions/ContinuousActions.html">ContinuousActions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actions/DiscreteActions.html">DiscreteActions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actions/MultiDiscreteActions.html">MultiDiscreteActions</a></li>
</ul>
<p class="caption"><span class="caption-text">Rewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rewards/RewardScheme.html">Reward Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rewards/RiskAdjustedReturns.html">Risk Adjusted Returns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rewards/SimpleProfit.html">Simple Profit</a></li>
</ul>
<p class="caption"><span class="caption-text">Learning Agents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../agents/learning_agents.html">Learning Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../agents/stable_baselines.html">Stable Baselines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../agents/tensorforce.html">Tensorforce</a></li>
</ul>
<p class="caption"><span class="caption-text">Strategies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../strategies/TradingStrategy.html">TradingStrategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../strategies/StableBaselinesTradingStrategy.html">StableBaselinesTradingStrategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../strategies/TensorforceTradingStrategy.html">TensorforceTradingStrategy</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/modules.html">API reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TensorTrade</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Feature Pipeline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/components/component_types/feature_pipeline.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="feature-pipeline">
<h1>Feature Pipeline<a class="headerlink" href="#feature-pipeline" title="Permalink to this headline">Â¶</a></h1>
<p>Feature pipelines are meant for transforming observations from the environment into meaningful features for an agent to learn from. If a pipeline has been added to a particular exchange, then observations will be passed through the <code class="docutils literal notranslate"><span class="pre">FeaturePipeline</span></code> before being output to the environment.</p>
<p>For example, a feature pipeline could normalize all price values, make a time series stationary, add a moving average column, and remove an unnecessary column, all before the observation is returned to the agent.</p>
<p>Feature pipelines can be initialized with an arbitrary number of comma-separated transformers. Each <code class="docutils literal notranslate"><span class="pre">FeatureTransformer</span></code> needs to be initialized with the set of columns to transform, or if nothing is passed, all input columns will be transformed.</p>
<p>Each feature transformer has a transform method, which will transform a single observation (a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) from a larger data set, keeping any necessary state in memory to transform the next frame. For this reason, it is often necessary to reset the FeatureTransformer periodically. This is done automatically each time the parent <code class="docutils literal notranslate"><span class="pre">FeaturePipeline</span></code> or <code class="docutils literal notranslate"><span class="pre">Exchange</span></code> is reset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tensortrade.features</span> <span class="kn">import</span> <span class="n">FeaturePipeline</span>
<span class="kn">from</span> <span class="nn">tensortrade.features.scalers</span> <span class="kn">import</span> <span class="n">MinMaxNormalizer</span>
<span class="kn">from</span> <span class="nn">tensortrade.features.stationarity</span> <span class="kn">import</span> <span class="n">FractionalDifference</span>
<span class="kn">from</span> <span class="nn">tensortrade.features.indicators</span> <span class="kn">import</span> <span class="n">SimpleMovingAverage</span>

<span class="n">price_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">]</span>
<span class="n">normalize_price</span> <span class="o">=</span> <span class="n">MinMaxNormalizer</span><span class="p">(</span><span class="n">price_columns</span><span class="p">)</span>
<span class="n">moving_averages</span> <span class="o">=</span> <span class="n">SimpleMovingAverage</span><span class="p">(</span><span class="n">price_columns</span><span class="p">)</span>
<span class="n">difference_all</span> <span class="o">=</span> <span class="n">FractionalDifference</span><span class="p">(</span><span class="n">difference_order</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">feature_pipeline</span> <span class="o">=</span> <span class="n">FeaturePipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="n">normalize_price</span><span class="p">,</span>
                                          <span class="n">moving_averages</span><span class="p">,</span>
                                          <span class="n">difference_all</span><span class="p">])</span>

<span class="n">exchange</span><span class="o">.</span><span class="n">feature_pipeline</span> <span class="o">=</span> <span class="n">feature_pipeline</span>
</pre></div>
</div>
<p><em>This feature pipeline normalizes the price values between 0 and 1, before adding some moving average columns and making the entire time series stationary by fractionally differencing consecutive values.</em></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="action_scheme.html" class="btn btn-neutral float-right" title="Action Scheme" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="exchange.html" class="btn btn-neutral float-left" title="Exchange" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>